<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Amplitude Modulation Synthesis | Web Audio Tutorials</title>
    <meta name="description" content="Set of tutorials on the Web Audio API">
    <meta name="generator" content="VitePress v1.0.0-rc.44">
    <link rel="preload stylesheet" href="/webaudio-tutorials/assets/style.hjrZeGoW.css" as="style">
    
    <script type="module" src="/webaudio-tutorials/assets/app.Br6yg46J.js"></script>
    <link rel="preload" href="/webaudio-tutorials/assets/inter-roman-latin.Bu8hRsVA.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/webaudio-tutorials/assets/chunks/framework.Wgqp_vq1.js">
    <link rel="modulepreload" href="/webaudio-tutorials/assets/chunks/theme.BuQ_LiZC.js">
    <link rel="modulepreload" href="/webaudio-tutorials/assets/basics_amplitude-modulation-synthesis.md.CdUU5gEW.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-d8b57b2d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c8291ffa></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c8291ffa> Skip to content </a><!--]--><!----><header class="VPNav" data-v-d8b57b2d data-v-7ad780c2><div class="VPNavBar has-sidebar" data-v-7ad780c2 data-v-3efcd581><div class="wrapper" data-v-3efcd581><div class="container" data-v-3efcd581><div class="title" data-v-3efcd581><div class="VPNavBarTitle has-sidebar" data-v-3efcd581 data-v-0ad69264><a class="title" href="/webaudio-tutorials/" data-v-0ad69264><!--[--><!--]--><!----><span data-v-0ad69264>Web Audio Tutorials</span><!--[--><!--]--></a></div></div><div class="content" data-v-3efcd581><div class="content-body" data-v-3efcd581><!--[--><!--]--><div class="VPNavBarSearch search" data-v-3efcd581><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-3efcd581 data-v-f732b5d0><span id="main-nav-aria-label" class="visually-hidden" data-v-f732b5d0>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/webaudio-tutorials/" tabindex="0" data-v-f732b5d0 data-v-cb318fec><!--[--><span data-v-cb318fec>Home</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-3efcd581 data-v-283b26e9><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-283b26e9 data-v-7df97737 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-7df97737></span><span class="vpi-moon moon" data-v-7df97737></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-3efcd581 data-v-ef6192dc data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/ircam-ismm/webaudio-tutorials" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-358b6670><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-3efcd581 data-v-8e87c032 data-v-af5898d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-af5898d3><span class="vpi-more-horizontal icon" data-v-af5898d3></span></button><div class="menu" data-v-af5898d3><div class="VPMenu" data-v-af5898d3 data-v-e42ed9b3><!----><!--[--><!--[--><!----><div class="group" data-v-8e87c032><div class="item appearance" data-v-8e87c032><p class="label" data-v-8e87c032>Appearance</p><div class="appearance-action" data-v-8e87c032><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-8e87c032 data-v-7df97737 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-7df97737></span><span class="vpi-moon moon" data-v-7df97737></span><!--]--></span></span></button></div></div></div><div class="group" data-v-8e87c032><div class="item social-links" data-v-8e87c032><div class="VPSocialLinks social-links-list" data-v-8e87c032 data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/ircam-ismm/webaudio-tutorials" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-358b6670><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-3efcd581 data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-3efcd581><div class="divider-line" data-v-3efcd581></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-d8b57b2d data-v-2488c25a><div class="container" data-v-2488c25a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-2488c25a><span class="vpi-align-left menu-icon" data-v-2488c25a></span><span class="menu-text" data-v-2488c25a>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-2488c25a data-v-0b5c97a1><button data-v-0b5c97a1>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-d8b57b2d data-v-4871f9f5><div class="curtain" data-v-4871f9f5></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-4871f9f5><span class="visually-hidden" id="sidebar-aria-label" data-v-4871f9f5> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-4871f9f5><section class="VPSidebarItem level-0" data-v-4871f9f5 data-v-12a5e56c><!----><div class="items" data-v-12a5e56c><!--[--><div class="VPSidebarItem level-1 is-link" data-v-12a5e56c data-v-12a5e56c><div class="item" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><a class="VPLink link link" href="/webaudio-tutorials/" data-v-12a5e56c><!--[--><p class="text" data-v-12a5e56c>Introduction</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-4871f9f5><section class="VPSidebarItem level-0" data-v-4871f9f5 data-v-12a5e56c><div class="item" role="button" tabindex="0" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><h2 class="text" data-v-12a5e56c>First steps</h2><!----></div><div class="items" data-v-12a5e56c><!--[--><div class="VPSidebarItem level-1 is-link" data-v-12a5e56c data-v-12a5e56c><div class="item" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><a class="VPLink link link" href="/webaudio-tutorials/first-steps/generalities.html" data-v-12a5e56c><!--[--><p class="text" data-v-12a5e56c>Generalities about the Web</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-12a5e56c data-v-12a5e56c><div class="item" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><a class="VPLink link link" href="/webaudio-tutorials/first-steps/setting-up-environment.html" data-v-12a5e56c><!--[--><p class="text" data-v-12a5e56c>Setting up an environment</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-12a5e56c data-v-12a5e56c><div class="item" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><a class="VPLink link link" href="/webaudio-tutorials/first-steps/simple-website.html" data-v-12a5e56c><!--[--><p class="text" data-v-12a5e56c>Create a simple website</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-4871f9f5><section class="VPSidebarItem level-0 has-active" data-v-4871f9f5 data-v-12a5e56c><div class="item" role="button" tabindex="0" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><h2 class="text" data-v-12a5e56c>Basics</h2><!----></div><div class="items" data-v-12a5e56c><!--[--><div class="VPSidebarItem level-1 is-link" data-v-12a5e56c data-v-12a5e56c><div class="item" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><a class="VPLink link link" href="/webaudio-tutorials/basics/web-audio-api-introduction.html" data-v-12a5e56c><!--[--><p class="text" data-v-12a5e56c>Web Audio API - Introduction</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-12a5e56c data-v-12a5e56c><div class="item" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><a class="VPLink link link" href="/webaudio-tutorials/basics/oscillators-and-audio-files.html" data-v-12a5e56c><!--[--><p class="text" data-v-12a5e56c>Oscillators and audio files</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-12a5e56c data-v-12a5e56c><div class="item" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><a class="VPLink link link" href="/webaudio-tutorials/basics/amplitude-modulation-synthesis.html" data-v-12a5e56c><!--[--><p class="text" data-v-12a5e56c>Amplitude modulation</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-12a5e56c data-v-12a5e56c><div class="item" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><a class="VPLink link link" href="/webaudio-tutorials/basics/encapsulating-logic.html" data-v-12a5e56c><!--[--><p class="text" data-v-12a5e56c>Encapsulating logic</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-12a5e56c data-v-12a5e56c><div class="item" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><a class="VPLink link link" href="/webaudio-tutorials/basics/reusable-feedback-delay.html" data-v-12a5e56c><!--[--><p class="text" data-v-12a5e56c>Reusable feedback delay</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-4871f9f5><section class="VPSidebarItem level-0" data-v-4871f9f5 data-v-12a5e56c><div class="item" role="button" tabindex="0" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><h2 class="text" data-v-12a5e56c>Scheduling</h2><!----></div><div class="items" data-v-12a5e56c><!--[--><div class="VPSidebarItem level-1 is-link" data-v-12a5e56c data-v-12a5e56c><div class="item" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><a class="VPLink link link" href="/webaudio-tutorials/scheduling/timing-and-scheduling.html" data-v-12a5e56c><!--[--><p class="text" data-v-12a5e56c>Timing and Scheduling</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-12a5e56c data-v-12a5e56c><div class="item" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><a class="VPLink link link" href="/webaudio-tutorials/scheduling/granular-synthesis.html" data-v-12a5e56c><!--[--><p class="text" data-v-12a5e56c>Granular Synthesis</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-12a5e56c data-v-12a5e56c><div class="item" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><a class="VPLink link link" href="/webaudio-tutorials/scheduling/step-sequencer.html" data-v-12a5e56c><!--[--><p class="text" data-v-12a5e56c>Step Sequencer</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-4871f9f5><section class="VPSidebarItem level-0" data-v-4871f9f5 data-v-12a5e56c><div class="item" role="button" tabindex="0" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><h2 class="text" data-v-12a5e56c>Ecosystem</h2><!----></div><div class="items" data-v-12a5e56c><!--[--><div class="VPSidebarItem level-1 is-link" data-v-12a5e56c data-v-12a5e56c><div class="item" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><a class="VPLink link vp-external-link-icon link" href="https://ircam-ismm.github.io/sc-components/" target="_blank" rel="noreferrer" data-v-12a5e56c><!--[--><p class="text" data-v-12a5e56c>@ircam/sc-components</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-12a5e56c data-v-12a5e56c><div class="item" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><a class="VPLink link vp-external-link-icon link" href="https://www.npmjs.com/package/@ircam/sc-scheduling" target="_blank" rel="noreferrer" data-v-12a5e56c><!--[--><p class="text" data-v-12a5e56c>@ircam/sc-scheduling</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-12a5e56c data-v-12a5e56c><div class="item" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><a class="VPLink link vp-external-link-icon link" href="https://www.npmjs.com/package/@ircam/sc-loader" target="_blank" rel="noreferrer" data-v-12a5e56c><!--[--><p class="text" data-v-12a5e56c>@ircam/sc-loader</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-12a5e56c data-v-12a5e56c><div class="item" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><a class="VPLink link vp-external-link-icon link" href="https://www.npmjs.com/package/@ircam/sc-utils" target="_blank" rel="noreferrer" data-v-12a5e56c><!--[--><p class="text" data-v-12a5e56c>@ircam/sc-utils</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-12a5e56c data-v-12a5e56c><div class="item" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><a class="VPLink link vp-external-link-icon link" href="https://www.npmjs.com/package/node-web-audio-api" target="_blank" rel="noreferrer" data-v-12a5e56c><!--[--><p class="text" data-v-12a5e56c>node-web-audio-api</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-12a5e56c data-v-12a5e56c><div class="item" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><a class="VPLink link vp-external-link-icon link" href="https://soundworks.dev" target="_blank" rel="noreferrer" data-v-12a5e56c><!--[--><p class="text" data-v-12a5e56c>soundworks</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-d8b57b2d data-v-9a6c75ad><div class="VPDoc has-sidebar has-aside" data-v-9a6c75ad data-v-e6f2a212><!--[--><!--]--><div class="container" data-v-e6f2a212><div class="aside" data-v-e6f2a212><div class="aside-curtain" data-v-e6f2a212></div><div class="aside-container" data-v-e6f2a212><div class="aside-content" data-v-e6f2a212><div class="VPDocAside" data-v-e6f2a212 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-cb998dce data-v-6b52fe58><div class="content" data-v-6b52fe58><div class="outline-marker" data-v-6b52fe58></div><div class="outline-title" role="heading" aria-level="2" data-v-6b52fe58>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-6b52fe58><span class="visually-hidden" id="doc-outline-aria-label" data-v-6b52fe58> Table of Contents for current page </span><ul class="VPDocOutlineItem root" data-v-6b52fe58 data-v-53c99d69><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e6f2a212><div class="content-container" data-v-e6f2a212><!--[--><!--]--><main class="main" data-v-e6f2a212><div style="position:relative;" class="vp-doc _webaudio-tutorials_basics_amplitude-modulation-synthesis" data-v-e6f2a212><div><h1 id="amplitude-modulation-synthesis" tabindex="-1">Amplitude Modulation Synthesis <a class="header-anchor" href="#amplitude-modulation-synthesis" aria-label="Permalink to &quot;Amplitude Modulation Synthesis&quot;">​</a></h1><p>In this tutorial, we will explore another very common synthesis technique: the Amplitude Modulation (AM) synthesis.</p><h3 id="related-documentation" tabindex="-1">Related Documentation <a class="header-anchor" href="#related-documentation" aria-label="Permalink to &quot;Related Documentation&quot;">​</a></h3><ul><li><a href="https://github.com/ircam-ismm/ircam-create" target="_blank" rel="noreferrer">@ircam/create</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/OscillatorNode" target="_blank" rel="noreferrer"><code>OscillatorNode</code></a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/GainNode" target="_blank" rel="noreferrer"><code>GainNode</code></a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/AudioParam" target="_blank" rel="noreferrer"><code>AudioParam</code></a></li><li><a href="https://lit.dev/" target="_blank" rel="noreferrer">lit</a></li><li><a href="https://ircam-ismm.github.io/sc-components/" target="_blank" rel="noreferrer">@ircam/sc-components</a></li></ul><h2 id="scaffold-the-project-automatically" tabindex="-1">Scaffold the project automatically <a class="header-anchor" href="#scaffold-the-project-automatically" aria-label="Permalink to &quot;Scaffold the project automatically&quot;">​</a></h2><p>First, let&#39;s start with scaffolding our project once again. This time, instead of manually create all files and linking them together, we will just use a simple tool that will do all the boring stuff for us.</p><p>Open a <code>Terminal</code> and go into your projects directory:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#66D9EF;">cd</span><span style="color:#E6DB74;"> Desktop/webaudio-tutorials</span></span></code></pre></div><p>Then run the following command to scaffold the project:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#A6E22E;">npx</span><span style="color:#E6DB74;"> @ircam/create@latest</span><span style="color:#AE81FF;"> 03</span><span style="color:#E6DB74;">-amplitude-modulation</span><span style="color:#AE81FF;"> --template=nobuild</span></span></code></pre></div><p>The <code>npx</code> will tell you that you need to install something, just press &quot;Enter&quot; to continue:</p><p><img src="/webaudio-tutorials/assets/scaffolding-project.B-pVBPv0.png" alt="scaffolding-project"></p><p>If you open the directory that have been created by the tool in your text editor, you should see the following structure and files:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#A6E22E;">03-amplitude-modules</span></span>
<span class="line"><span style="color:#A6E22E;">├──</span><span style="color:#E6DB74;"> assets</span><span style="color:#88846F;">              # Directory to store assets of your project (e.g. sound files)</span></span>
<span class="line"><span style="color:#A6E22E;">│</span><span style="color:#E6DB74;">   └──</span><span style="color:#E6DB74;"> sample.wav</span><span style="color:#88846F;">      # a test sound file</span></span>
<span class="line"><span style="color:#A6E22E;">├──</span><span style="color:#E6DB74;"> lib</span><span style="color:#88846F;">                 # Directory where to store some common helpers</span></span>
<span class="line"><span style="color:#A6E22E;">│</span><span style="color:#E6DB74;">   ├──</span><span style="color:#E6DB74;"> load-audio-buffer.js</span></span>
<span class="line"><span style="color:#A6E22E;">│</span><span style="color:#E6DB74;">   └──</span><span style="color:#E6DB74;"> resume-audio-context.js</span></span>
<span class="line"><span style="color:#A6E22E;">├──</span><span style="color:#E6DB74;"> index.html</span><span style="color:#88846F;">          # The index file</span></span>
<span class="line"><span style="color:#A6E22E;">├──</span><span style="color:#E6DB74;"> main.js</span><span style="color:#88846F;">             # Where you will put the JavaScript code</span></span>
<span class="line"><span style="color:#A6E22E;">├──</span><span style="color:#E6DB74;"> README.md</span><span style="color:#88846F;">           # General info about your application</span></span>
<span class="line"><span style="color:#A6E22E;">└──</span><span style="color:#E6DB74;"> styles.css</span><span style="color:#88846F;">          # The CSS file</span></span></code></pre></div><p>The project is very close from what we have done manually so far, except that it already contains the code required to resume the audio context, to load sound files, as well as some default CSS to make it nicer to look.</p><p>Before digging a bit more into the code, let&#39;s just follow the &quot;next steps&quot; instructions given by the tool to make sure everything works as expected:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#66D9EF;">cd</span><span style="color:#AE81FF;"> 03</span><span style="color:#E6DB74;">-amplitude-modulation</span></span>
<span class="line"><span style="color:#A6E22E;">npx</span><span style="color:#E6DB74;"> serve</span></span></code></pre></div><p><img src="/webaudio-tutorials/assets/serve.CB0NsztU.png" alt="serve"></p><p>As you can see, the server has been launched into our project, just as before. If you then open <a href="http://localhost:3000" target="_blank" rel="noreferrer">http://localhost:3000</a>, you should see a initialization page with a big button to resume the context:</p><p><img src="/webaudio-tutorials/assets/scaffold-screenshot-1.BMRUWqsl.png" alt="scaffold-screenshot-1"></p><p>And, after a click on the button:</p><p><img src="/webaudio-tutorials/assets/scaffold-screenshot-2.B0AEPzwI.png" alt="scaffold-screenshot-2"></p><h2 id="using-import-and-libraries" tabindex="-1">Using <code>import</code> and libraries <a class="header-anchor" href="#using-import-and-libraries" aria-label="Permalink to &quot;Using `import` and libraries&quot;">​</a></h2><p>Let&#39;s open the <code>main.js</code> file to explore how the project is structured:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#88846F;">// main.js</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> { html, render } </span><span style="color:#F92672;">from</span><span style="color:#E6DB74;"> &#39;https://unpkg.com/lit-html&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#E6DB74;"> &#39;https://unpkg.com/@ircam/sc-components@latest&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> resumeAudioContext </span><span style="color:#F92672;">from</span><span style="color:#E6DB74;"> &#39;./lib/resume-audio-context.js&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> loadAudioBuffer </span><span style="color:#F92672;">from</span><span style="color:#E6DB74;"> &#39;./lib/load-audio-buffer.js&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> audioContext </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> AudioContext</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F92672;">await</span><span style="color:#A6E22E;"> resumeAudioContext</span><span style="color:#F8F8F2;">(audioContext);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> buffer </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> await</span><span style="color:#A6E22E;"> loadAudioBuffer</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;./assets/sample.wav&#39;</span><span style="color:#F8F8F2;">, audioContext.sampleRate);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E;">render</span><span style="color:#F8F8F2;">(</span><span style="color:#A6E22E;">html</span><span style="color:#E6DB74;">`</span></span>
<span class="line"><span style="color:#E6DB74;">  &lt;h1&gt;03-amplitude-modulation&lt;/h1&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">  &lt;sc-bang</span></span>
<span class="line"><span style="color:#E6DB74;">    @input=</span><span style="color:#F92672;">${</span><span style="color:#FD971F;font-style:italic;">e</span><span style="color:#66D9EF;font-style:italic;"> =&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">      const</span><span style="color:#F8F8F2;"> src </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> audioContext.</span><span style="color:#A6E22E;">createBufferSource</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">      src.</span><span style="color:#A6E22E;">connect</span><span style="color:#F8F8F2;">(audioContext.destination);</span></span>
<span class="line"><span style="color:#F8F8F2;">      src.buffer </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> buffer;</span></span>
<span class="line"><span style="color:#F8F8F2;">      src.</span><span style="color:#A6E22E;">start</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span><span style="color:#F92672;">}</span></span>
<span class="line"><span style="color:#E6DB74;">  &gt;&lt;/sc-bang&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">`</span><span style="color:#F8F8F2;">, document.body);</span></span></code></pre></div><p>As you can see, while some things may appear quite similar to what we have already done in previous tutorials, there are also a few new things that we need to understand.</p><p>The most important are the first lines, which begin with <code>import</code>, let&#39;s just concentrate on one of the two last imports to understand what is going on there:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> { html, render } </span><span style="color:#F92672;">from</span><span style="color:#E6DB74;"> &#39;https://unpkg.com/lit-html&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#E6DB74;"> &#39;https://unpkg.com/@ircam/sc-components@latest&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> resumeAudioContext </span><span style="color:#F92672;">from</span><span style="color:#E6DB74;"> &#39;./lib/resume-audio-context.js&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line highlighted"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> loadAudioBuffer </span><span style="color:#F92672;">from</span><span style="color:#E6DB74;"> &#39;./lib/load-audio-buffer.js&#39;</span><span style="color:#F8F8F2;">;</span></span></code></pre></div><p>If we detail this, we can understand that our code &quot;imports&quot; something called <code>loadAudioBuffer</code> from a relative location: <code>&#39;./lib/load-audio-buffer.js&#39;</code>. Interestingly, this location corresponds to the <code>load-audio-buffer.js</code> file located inside the <code>lib</code> directory. Let&#39;s just open this file to understand what our code actually imports:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#88846F;">// ./lib/load-audio-buffer.js</span></span>
<span class="line"><span style="color:#F92672;">export</span><span style="color:#F92672;"> default</span><span style="color:#F92672;"> async</span><span style="color:#66D9EF;font-style:italic;"> function</span><span style="color:#A6E22E;"> loadAudioBuffer</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">pathname</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">sampleRate</span><span style="color:#F92672;"> =</span><span style="color:#AE81FF;"> 48000</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#88846F;">  // ...</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  const</span><span style="color:#F8F8F2;"> response </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> await</span><span style="color:#A6E22E;"> fetch</span><span style="color:#F8F8F2;">(pathname);</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  const</span><span style="color:#F8F8F2;"> arrayBuffer </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> await</span><span style="color:#F8F8F2;"> response.</span><span style="color:#A6E22E;">arrayBuffer</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#88846F;">  // ...</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  const</span><span style="color:#F8F8F2;"> audioBuffer </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> await</span><span style="color:#F8F8F2;"> context.</span><span style="color:#A6E22E;">decodeAudioData</span><span style="color:#F8F8F2;">(arrayBuffer);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">  return</span><span style="color:#F8F8F2;"> audioBuffer;</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre></div><p>Except some particularities that have been removed from the snippet above, you can see that this file &quot;exports&quot; a function called <code>loadAudioBuffer</code> which contains more or less the same code you wrote in the last tutorial to load an audio file from the network and to decode it to an <a href="https://developer.mozilla.org/en-US/docs/Web/API/AudioBuffer" target="_blank" rel="noreferrer"><code>AudioBuffer</code></a>.</p><p>These <code>import</code> and <code>export</code> statements are the tools JavaScript gives us to organize our projects. Moreover, they also allows us to load libraries directly from the Web, cf. the first two <code>import</code> and thus share functionalities between several projects. For example, the two libraries that are imported in the first two lines will help us creating the user interfaces more simply.</p><h2 id="create-the-audio-graph" tabindex="-1">Create the audio graph <a class="header-anchor" href="#create-the-audio-graph" aria-label="Permalink to &quot;Create the audio graph&quot;">​</a></h2><p>Now that everything is ready and that you have an understanding of the structure of the project, let&#39;s write our AM synthesis engine. The main principle of AM synthesis is to modulate the amplitude (i.e. the gain) of a signal, called the &quot;carrier&quot;, with another &quot;modulating&quot; signal.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>We won&#39;t go into the details of how amplitude modulation works here, so if you are not familiar with how AM synthesis works, you can find a number of resources online such as on <a href="https://en.wikipedia.org/wiki/Amplitude_modulation" target="_blank" rel="noreferrer">Wikipedia</a></p></div><p>As we will only use <a href="https://developer.mozilla.org/en-US/docs/Web/API/OscillatorNode" target="_blank" rel="noreferrer"><code>OscillatorNode</code></a> here, let&#39;s start with cleaning a bit our <code>main.js</code> file to remove the things we won&#39;t use:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai has-diff vp-code"><code><span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> { html, render } </span><span style="color:#F92672;">from</span><span style="color:#E6DB74;"> &#39;https://unpkg.com/lit-html&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#E6DB74;"> &#39;https://unpkg.com/@ircam/sc-components@latest&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> resumeAudioContext </span><span style="color:#F92672;">from</span><span style="color:#E6DB74;"> &#39;./lib/resume-audio-context.js&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line diff remove"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> loadAudioBuffer </span><span style="color:#F92672;">from</span><span style="color:#E6DB74;"> &#39;./lib/load-audio-buffer.js&#39;</span><span style="color:#F8F8F2;">; </span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> audioContext </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> AudioContext</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F92672;">await</span><span style="color:#A6E22E;"> resumeAudioContext</span><span style="color:#F8F8F2;">(audioContext);</span></span>
<span class="line"></span>
<span class="line diff remove"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> buffer </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> await</span><span style="color:#A6E22E;"> loadAudioBuffer</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;./assets/sample.wav&#39;</span><span style="color:#F8F8F2;">, audioContext.sampleRate);  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E;">render</span><span style="color:#F8F8F2;">(</span><span style="color:#A6E22E;">html</span><span style="color:#E6DB74;">`</span></span>
<span class="line"><span style="color:#E6DB74;">  &lt;h1&gt;03-amplitude-modulation&lt;/h1&gt;</span></span>
<span class="line diff remove"><span style="color:#E6DB74;">  &lt;sc-bang</span></span>
<span class="line diff remove"><span style="color:#E6DB74;">    @input=</span><span style="color:#F92672;">${</span><span style="color:#FD971F;font-style:italic;">e</span><span style="color:#66D9EF;font-style:italic;"> =&gt;</span><span style="color:#F8F8F2;"> {  </span></span>
<span class="line diff remove"><span style="color:#66D9EF;font-style:italic;">      const</span><span style="color:#F8F8F2;"> src </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> audioContext.</span><span style="color:#A6E22E;">createBufferSource</span><span style="color:#F8F8F2;">();  </span></span>
<span class="line diff remove"><span style="color:#F8F8F2;">      src.</span><span style="color:#A6E22E;">connect</span><span style="color:#F8F8F2;">(audioContext.destination);  </span></span>
<span class="line diff remove"><span style="color:#F8F8F2;">      src.buffer </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> buffer;  </span></span>
<span class="line diff remove"><span style="color:#F8F8F2;">      src.</span><span style="color:#A6E22E;">start</span><span style="color:#F8F8F2;">();  </span></span>
<span class="line diff remove"><span style="color:#F8F8F2;">    }</span><span style="color:#F92672;">}</span></span>
<span class="line diff remove"><span style="color:#E6DB74;">  &gt;&lt;/sc-bang&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">`</span><span style="color:#F8F8F2;">, document.body);</span></span></code></pre></div><p>which leaves us with an even more simple structure:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> { html, render } </span><span style="color:#F92672;">from</span><span style="color:#E6DB74;"> &#39;https://unpkg.com/lit-html&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#E6DB74;"> &#39;https://unpkg.com/@ircam/sc-components@latest&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> resumeAudioContext </span><span style="color:#F92672;">from</span><span style="color:#E6DB74;"> &#39;./lib/resume-audio-context.js&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> audioContext </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> AudioContext</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F92672;">await</span><span style="color:#A6E22E;"> resumeAudioContext</span><span style="color:#F8F8F2;">(audioContext);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E;">render</span><span style="color:#F8F8F2;">(</span><span style="color:#A6E22E;">html</span><span style="color:#E6DB74;">`</span></span>
<span class="line"><span style="color:#E6DB74;">  &lt;h1&gt;03-amplitude-modulation&lt;/h1&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">`</span><span style="color:#F8F8F2;">, document.body);</span></span></code></pre></div><p>Then let&#39;s first define some constant for our synthesizer:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> audioContext </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> AudioContext</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F92672;">await</span><span style="color:#A6E22E;"> resumeAudioContext</span><span style="color:#F8F8F2;">(audioContext);</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> amDepth </span><span style="color:#F92672;">=</span><span style="color:#AE81FF;"> 1</span><span style="color:#F8F8F2;">; </span><span style="color:#88846F;">// how much the carrier is modulated: [0, 1]</span></span>
<span class="line highlighted"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> amFrequency </span><span style="color:#F92672;">=</span><span style="color:#AE81FF;"> 2</span><span style="color:#F8F8F2;">; </span><span style="color:#88846F;">// in Hz</span></span>
<span class="line highlighted"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> carrierFrequency </span><span style="color:#F92672;">=</span><span style="color:#AE81FF;"> 200</span><span style="color:#F8F8F2;">; </span><span style="color:#88846F;">// in Hz</span></span></code></pre></div><p>Then, let&#39;s define our &quot;carrier&quot; oscillator and the gain that will be modulated to create the modulating envelop:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> carrierFrequency </span><span style="color:#F92672;">=</span><span style="color:#AE81FF;"> 200</span><span style="color:#F8F8F2;">; </span><span style="color:#88846F;">// in Hz</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#88846F;">// carrier signal</span></span>
<span class="line highlighted"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> carrier </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> audioContext.</span><span style="color:#A6E22E;">createOscillator</span><span style="color:#F8F8F2;">();</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">carrier.frequency.value </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> carrierFrequency;</span></span>
<span class="line highlighted"><wbr></span>
<span class="line highlighted"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> envelop </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> audioContext.</span><span style="color:#A6E22E;">createGain</span><span style="color:#F8F8F2;">();</span></span>
<span class="line highlighted"><wbr></span>
<span class="line highlighted"><span style="color:#88846F;">// connect them all together</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">carrier.</span><span style="color:#A6E22E;">connect</span><span style="color:#F8F8F2;">(envelop)</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">envelop.</span><span style="color:#A6E22E;">connect</span><span style="color:#F8F8F2;">(audioContext.destination);</span></span>
<span class="line highlighted"><wbr></span>
<span class="line highlighted"><span style="color:#88846F;">// start the sources</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">carrier.</span><span style="color:#A6E22E;">start</span><span style="color:#F8F8F2;">();</span></span></code></pre></div><p>If you reload the page now, you should ear a simple sine oscillator at 200Hz.</p><p>Let&#39;s now implement the modulating branch of our synthesizer. What we want to obtain here is a amplitude signal which has the form of a sine wave at 2Hz (the <code>amFrequency</code> value), and comprised between 0 and 1 (the <code>amDepth</code> value).</p><p><img src="/webaudio-tutorials/assets/modulating-amp.CSfEWiVP.png" alt="modulating-amp"></p><p>To achieve this using only <a href="https://developer.mozilla.org/en-US/docs/Web/API/OscillatorNode" target="_blank" rel="noreferrer"><code>OscillatorNode</code></a> (which produces a signal between <code>-1</code> and <code>1</code>) and a <a href="https://developer.mozilla.org/en-US/docs/Web/API/GainNode" target="_blank" rel="noreferrer"><code>GainNode</code></a> (which basically apply a multiplication on an incoming signal), we will need two steps:</p><ul><li>Apply a gain of 0.5 (i.e. <code>amDepth / 2</code>) on an oscillator, producing a sin comprised between <code>-0.5</code> and <code>0.5</code></li><li>Then add a constant value of <code>0.5</code> (i.e. <code>1 - amDepth / 2</code>) to this scaled signal</li></ul><p>In terms of audio graph, this will be achieved by connecting the scaled signal to the <code>gain</code> property of a <code>GainNode</code> (which is an instance of <a href="https://developer.mozilla.org/en-US/docs/Web/API/AudioParam" target="_blank" rel="noreferrer"><code>AudioParam</code></a>), which will add the modulating signal to the <code>gain</code> intrisic value, as show in the graph below:</p><p><img src="/webaudio-tutorials/assets/modulation-graph.DfxO4Gwz.png" alt="modulating-amp"></p><p>In terms of code, the first step is quite straight forward, it is basically creating an oscillator and piping it into a gain:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F8F8F2;">envelop.</span><span style="color:#A6E22E;">connect</span><span style="color:#F8F8F2;">(audioContext.destination);</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#88846F;">// modullating branch</span></span>
<span class="line highlighted"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> modulator </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> audioContext.</span><span style="color:#A6E22E;">createOscillator</span><span style="color:#F8F8F2;">();</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">modulator.frequency.value </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> amFrequency;</span></span>
<span class="line highlighted"><wbr></span>
<span class="line highlighted"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> depth </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> audioContext.</span><span style="color:#A6E22E;">createGain</span><span style="color:#F8F8F2;">();</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">depth.gain.value </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> amDepth </span><span style="color:#F92672;">/</span><span style="color:#AE81FF;"> 2</span><span style="color:#F8F8F2;">;</span></span>
<span class="line highlighted"><wbr></span>
<span class="line highlighted"><span style="color:#F8F8F2;">modulator.</span><span style="color:#A6E22E;">connect</span><span style="color:#F8F8F2;">(depth); </span><span style="color:#88846F;">// signal between [-0.5, 0.5]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// start the sources</span></span>
<span class="line"><span style="color:#F8F8F2;">carrier.</span><span style="color:#A6E22E;">start</span><span style="color:#F8F8F2;">();</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">modulator.</span><span style="color:#A6E22E;">start</span><span style="color:#F8F8F2;">();</span></span></code></pre></div><p>The second step, to add an offset to the scaled signal, requires us to use a interesting feature of <a href="https://developer.mozilla.org/en-US/docs/Web/API/AudioParam" target="_blank" rel="noreferrer"><code>AudioParam</code></a>s. Indeed, the Web Audio API allows us to directly modulate an <a href="https://developer.mozilla.org/en-US/docs/Web/API/AudioParam" target="_blank" rel="noreferrer"><code>AudioParam</code></a>, for example the <code>gain</code> of our <code>envelop</code> node, with another signal. When connecting a node to a audio param, the signal of the node is &quot;added&quot; to the signal intrinsically produced by the audio param.</p><p>In other words, if we set the <code>gain</code> of our <code>envelop</code> to 0.5, the gain <code>AudioParam</code> produces a constant signal at <code>0.5</code>, which is used to multiply the input signal of the <code>GainNode</code>. But if we modulate our gain <code>AudioParam</code>, and therefore its constant signal a <code>0.5</code> with the scaled signal we just created with the <code>modulator</code> and <code>depth</code> node. The constant signal of the gain <code>AudioParam</code> and our scaled signal will just be added together, producing a sine wave comprised between <code>0</code> and <code>1</code>.</p><p>In the code, this just means:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai has-diff vp-code"><code><span class="line"><span style="color:#88846F;">// carrier signal</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> carrier </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> audioContext.</span><span style="color:#A6E22E;">createOscillator</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">carrier.frequency.value </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> carrierFrequency;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> envelop </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> audioContext.</span><span style="color:#A6E22E;">createGain</span><span style="color:#F8F8F2;">();</span></span>
<span class="line diff add"><span style="color:#F8F8F2;">envelop.gain.value </span><span style="color:#F92672;">=</span><span style="color:#AE81FF;"> 1</span><span style="color:#F92672;"> -</span><span style="color:#F8F8F2;"> amDepth </span><span style="color:#F92672;">/</span><span style="color:#AE81FF;"> 2</span><span style="color:#F8F8F2;">; </span><span style="color:#88846F;">// set to the offset we want (i.e. 0.5)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// connect them all together</span></span>
<span class="line"><span style="color:#F8F8F2;">carrier.</span><span style="color:#A6E22E;">connect</span><span style="color:#F8F8F2;">(envelop)</span></span>
<span class="line"><span style="color:#F8F8F2;">envelop.</span><span style="color:#A6E22E;">connect</span><span style="color:#F8F8F2;">(audioContext.destination);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// modulating branch</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> modulator </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> audioContext.</span><span style="color:#A6E22E;">createOscillator</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">modulator.frequency.value </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> amFrequency;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> depth </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> audioContext.</span><span style="color:#A6E22E;">createGain</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">depth.gain.value </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> amDepth </span><span style="color:#F92672;">/</span><span style="color:#AE81FF;"> 2</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">modulator.</span><span style="color:#A6E22E;">connect</span><span style="color:#F8F8F2;">(depth); </span><span style="color:#88846F;">// signal between [-0.5, 0.5]</span></span>
<span class="line diff add"><span style="color:#F8F8F2;">depth.</span><span style="color:#A6E22E;">connect</span><span style="color:#F8F8F2;">(envelop.gain); </span><span style="color:#88846F;">// adds our scaled signal with audio param signal</span></span></code></pre></div><p>You reload the page now, you should ear a simple tremolo at 2Hz applied to the carrier frequency at 200Hz.</p><p><audio controls loop src="/webaudio-tutorials/static-assets/am-tremolo-2hz.m4a"></audio></p><p>Congrats, you have written your first little synthesizer!</p><h2 id="create-the-user-interface" tabindex="-1">Create the user interface <a class="header-anchor" href="#create-the-user-interface" aria-label="Permalink to &quot;Create the user interface&quot;">​</a></h2><p>Now that the guts of our synthesizer is ready, let&#39;s create the user interface that will allow to manipulate its different params, i.e. <code>amDepth</code>, <code>amFrequency</code>, <code>carrierFrequency</code>.</p><p>To that end we will use the two libraries that are imported on the top of our file:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> { html, render } </span><span style="color:#F92672;">from</span><span style="color:#E6DB74;"> &#39;https://unpkg.com/lit-html&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#E6DB74;"> &#39;https://unpkg.com/@ircam/sc-components@latest&#39;</span><span style="color:#F8F8F2;">;</span></span></code></pre></div><p>The first one, the <a href="https://lit.dev/" target="_blank" rel="noreferrer"><code>lit</code></a> library is what is called a template engine. Without going into detail, let&#39;s consider this library allows us to write our HTML code in a simple manner directly from the JavaScript, e.g. the following lines in our <code>main.js</code> file:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#A6E22E;">render</span><span style="color:#F8F8F2;">(</span><span style="color:#A6E22E;">html</span><span style="color:#E6DB74;">`</span></span>
<span class="line"><span style="color:#E6DB74;">  &lt;h1&gt;03-amplitude-modulation&lt;/h1&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">`</span><span style="color:#F8F8F2;">, document.body);</span></span></code></pre></div><p>are the one that created the <code>&lt;h1&gt;</code> tag that we can use in the browser since the beginning of this tutorial:</p><p><img src="/webaudio-tutorials/assets/lit-tittle.dhh1_ihy.png" alt="lit-tittle"></p><p>The second library, <a href="https://ircam-ismm.github.io/sc-components/" target="_blank" rel="noreferrer"><code>@ircam/sc-components</code></a>, is a library that provides high-level graphical components for rapid prototyping audio application (...which interestingly seems to be perfect for us)</p><p>Let&#39;s first add some code and interface so that we can control our carrier frequency:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#A6E22E;">render</span><span style="color:#F8F8F2;">(</span><span style="color:#A6E22E;">html</span><span style="color:#E6DB74;">`</span></span>
<span class="line"><span style="color:#E6DB74;">  &lt;h1&gt;03-amplitude-modulation&lt;/h1&gt;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">  &lt;div&gt;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">    &lt;sc-text&gt;carrier frequency&lt;/sc-text&gt;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">    &lt;sc-slider</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">      min=&quot;20&quot;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">      max=&quot;5000&quot;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">      step=&quot;1&quot;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">      number-box</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">      value=</span><span style="color:#F92672;">${</span><span style="color:#F8F8F2;">carrierFrequency</span><span style="color:#F92672;">}</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">      @input=</span><span style="color:#F92672;">${</span><span style="color:#FD971F;font-style:italic;">e</span><span style="color:#66D9EF;font-style:italic;"> =&gt;</span><span style="color:#F8F8F2;"> { carrier.frequency.value </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> e.detail.value; } </span><span style="color:#F92672;">}</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">    &gt;&lt;/sc-slider&gt;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">  &lt;/div&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">`</span><span style="color:#F8F8F2;">, document.body);</span></span></code></pre></div><p>If you reload, you should now see a nice slider allowing you to control the frequency of the carrier oscillator:</p><p><img src="/webaudio-tutorials/assets/gui-carrier.C2cFGXUE.png" alt="gui-carrier"></p><p>Second, let&#39;s add another slider to control the modulation frequency:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#A6E22E;">render</span><span style="color:#F8F8F2;">(</span><span style="color:#A6E22E;">html</span><span style="color:#E6DB74;">`</span></span>
<span class="line"><span style="color:#E6DB74;">  &lt;h1&gt;03-amplitude-modulation&lt;/h1&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">  &lt;div&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">    &lt;sc-text&gt;carrier frequency&lt;/sc-text&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">    &lt;sc-slider</span></span>
<span class="line"><span style="color:#E6DB74;">      min=&quot;20&quot;</span></span>
<span class="line"><span style="color:#E6DB74;">      max=&quot;5000&quot;</span></span>
<span class="line"><span style="color:#E6DB74;">      step=&quot;1&quot;</span></span>
<span class="line"><span style="color:#E6DB74;">      number-box</span></span>
<span class="line"><span style="color:#E6DB74;">      value=</span><span style="color:#F92672;">${</span><span style="color:#F8F8F2;">carrierFrequency</span><span style="color:#F92672;">}</span></span>
<span class="line"><span style="color:#E6DB74;">      @input=</span><span style="color:#F92672;">${</span><span style="color:#FD971F;font-style:italic;">e</span><span style="color:#66D9EF;font-style:italic;"> =&gt;</span><span style="color:#F8F8F2;"> { carrier.frequency.value </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> e.detail.value; } </span><span style="color:#F92672;">}</span></span>
<span class="line"><span style="color:#E6DB74;">    &gt;&lt;/sc-slider&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">  &lt;/div&gt;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">  &lt;div&gt;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">    &lt;sc-text&gt;modulator frequency&lt;/sc-text&gt;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">    &lt;sc-slider</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">      min=&quot;20&quot;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">      max=&quot;5000&quot;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">      step=&quot;1&quot;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">      number-box</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">      value=</span><span style="color:#F92672;">${</span><span style="color:#F8F8F2;">amFrequency</span><span style="color:#F92672;">}</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">      @input=</span><span style="color:#F92672;">${</span><span style="color:#FD971F;font-style:italic;">e</span><span style="color:#66D9EF;font-style:italic;"> =&gt;</span><span style="color:#F8F8F2;"> { modulator.frequency.value </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> e.detail.value; } </span><span style="color:#F92672;">}</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">    &gt;&lt;/sc-slider&gt;</span></span>
<span class="line highlighted"><span style="color:#E6DB74;">  &lt;/div&gt;</span></span>
<span class="line"><span style="color:#E6DB74;">`</span><span style="color:#F8F8F2;">, document.body);</span></span></code></pre></div><p>Now things start to get more interesting, as you can already explore the large number of sounds such a simple synthesizer can produce!</p><p><img src="/webaudio-tutorials/assets/gui-modulator.BSJTaM54.png" alt="gui-modulator"></p><h2 id="going-further" tabindex="-1">Going further <a class="header-anchor" href="#going-further" aria-label="Permalink to &quot;Going further&quot;">​</a></h2><p>As an exercise, we let you add the last control over the AM depth. This last control is a bit more complex as it will have to update both <code>envelop.gain</code> and <code>depth.gain</code> so that the sum of the two signal always has a max value of one (...all the necessary information are present in the tutorial to do it properly).</p><p>Another interesting exercise could be to implement a Frequency Modulation synthesizer, which rely on the same concepts as the one developed in this tutorial.</p><h2 id="conclusion" tabindex="-1">Conclusion <a class="header-anchor" href="#conclusion" aria-label="Permalink to &quot;Conclusion&quot;">​</a></h2><p>In this tutorial, you have learned how to build more complex audio graph where a signal modulates the parameter of another node (see also FM synthesis). Along the way we have used a more advanced tool to scaffold our application, and libraries to help us create interfaces in a more simple manner.</p><p>In the next tutorial, we will learn some concept of object oriented programming and encapsulation, which will help us to organize our code and to create reusable audio components.</p></div></div></main><footer class="VPDocFooter" data-v-e6f2a212 data-v-b77f9094><!--[--><!--]--><!----><nav class="prev-next" data-v-b77f9094><div class="pager" data-v-b77f9094><a class="VPLink link pager-link prev" href="/webaudio-tutorials/basics/oscillators-and-audio-files.html" data-v-b77f9094><!--[--><span class="desc" data-v-b77f9094>Previous page</span><span class="title" data-v-b77f9094>Oscillators and audio files</span><!--]--></a></div><div class="pager" data-v-b77f9094><a class="VPLink link pager-link next" href="/webaudio-tutorials/basics/encapsulating-logic.html" data-v-b77f9094><!--[--><span class="desc" data-v-b77f9094>Next page</span><span class="title" data-v-b77f9094>Encapsulating logic</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"first-steps_setting-up-environment.md\":\"DGEXyCmx\",\"basics_encapsulating-logic.md\":\"B02WJp0E\",\"scheduling_timing-and-scheduling.md\":\"Dwsqu1yd\",\"basics_amplitude-modulation-synthesis.md\":\"CdUU5gEW\",\"first-steps_generalities.md\":\"BdbxhhUB\",\"index.md\":\"Cnpzc8jN\",\"basics_web-audio-api-introduction.md\":\"CycO03f_\",\"scheduling_granular-synthesis.md\":\"DIRpu14j\",\"basics_oscillators-and-audio-files.md\":\"-03dkhFt\",\"basics_reusable-feedback-delay.md\":\"ChVEG-Cp\",\"scheduling_step-sequencer.md\":\"BLR4AqBr\",\"first-steps_simple-website.md\":\"kYRZq57U\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Web Audio Tutorials\",\"description\":\"Set of tutorials on the Web Audio API\",\"base\":\"/webaudio-tutorials/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"Home\",\"link\":\"/\"}],\"sidebar\":[{\"text\":\"Introduction\",\"link\":\"/\"},{\"text\":\"First steps\",\"items\":[{\"text\":\"Generalities about the Web\",\"link\":\"/first-steps/generalities.md\"},{\"text\":\"Setting up an environment\",\"link\":\"/first-steps/setting-up-environment.md\"},{\"text\":\"Create a simple website\",\"link\":\"/first-steps/simple-website.md\"}]},{\"text\":\"Basics\",\"items\":[{\"text\":\"Web Audio API - Introduction\",\"link\":\"/basics/web-audio-api-introduction.md\"},{\"text\":\"Oscillators and audio files\",\"link\":\"/basics/oscillators-and-audio-files.md\"},{\"text\":\"Amplitude modulation\",\"link\":\"/basics/amplitude-modulation-synthesis.md\"},{\"text\":\"Encapsulating logic\",\"link\":\"/basics/encapsulating-logic.md\"},{\"text\":\"Reusable feedback delay\",\"link\":\"/basics/reusable-feedback-delay.md\"}]},{\"text\":\"Scheduling\",\"items\":[{\"text\":\"Timing and Scheduling\",\"link\":\"/scheduling/timing-and-scheduling.md\"},{\"text\":\"Granular Synthesis\",\"link\":\"/scheduling/granular-synthesis.md\"},{\"text\":\"Step Sequencer\",\"link\":\"/scheduling/step-sequencer.md\"}]},{\"text\":\"Ecosystem\",\"items\":[{\"text\":\"@ircam/sc-components\",\"link\":\"https://ircam-ismm.github.io/sc-components/\"},{\"text\":\"@ircam/sc-scheduling\",\"link\":\"https://www.npmjs.com/package/@ircam/sc-scheduling\"},{\"text\":\"@ircam/sc-loader\",\"link\":\"https://www.npmjs.com/package/@ircam/sc-loader\"},{\"text\":\"@ircam/sc-utils\",\"link\":\"https://www.npmjs.com/package/@ircam/sc-utils\"},{\"text\":\"node-web-audio-api\",\"link\":\"https://www.npmjs.com/package/node-web-audio-api\"},{\"text\":\"soundworks\",\"link\":\"https://soundworks.dev\"}]}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/ircam-ismm/webaudio-tutorials\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>