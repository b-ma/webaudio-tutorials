<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Oscillators and Audio Files | Web Audio Tutorials</title>
    <meta name="description" content="Set of tutorials on the Web Audio API">
    <meta name="generator" content="VitePress v1.0.0-rc.44">
    <link rel="preload stylesheet" href="/webaudio-tutorials/assets/style.hjrZeGoW.css" as="style">
    
    <script type="module" src="/webaudio-tutorials/assets/app.Br6yg46J.js"></script>
    <link rel="preload" href="/webaudio-tutorials/assets/inter-roman-latin.Bu8hRsVA.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/webaudio-tutorials/assets/chunks/framework.Wgqp_vq1.js">
    <link rel="modulepreload" href="/webaudio-tutorials/assets/chunks/theme.BuQ_LiZC.js">
    <link rel="modulepreload" href="/webaudio-tutorials/assets/basics_oscillators-and-audio-files.md.-03dkhFt.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-d8b57b2d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c8291ffa></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c8291ffa> Skip to content </a><!--]--><!----><header class="VPNav" data-v-d8b57b2d data-v-7ad780c2><div class="VPNavBar has-sidebar" data-v-7ad780c2 data-v-3efcd581><div class="wrapper" data-v-3efcd581><div class="container" data-v-3efcd581><div class="title" data-v-3efcd581><div class="VPNavBarTitle has-sidebar" data-v-3efcd581 data-v-0ad69264><a class="title" href="/webaudio-tutorials/" data-v-0ad69264><!--[--><!--]--><!----><span data-v-0ad69264>Web Audio Tutorials</span><!--[--><!--]--></a></div></div><div class="content" data-v-3efcd581><div class="content-body" data-v-3efcd581><!--[--><!--]--><div class="VPNavBarSearch search" data-v-3efcd581><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-3efcd581 data-v-f732b5d0><span id="main-nav-aria-label" class="visually-hidden" data-v-f732b5d0>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/webaudio-tutorials/" tabindex="0" data-v-f732b5d0 data-v-cb318fec><!--[--><span data-v-cb318fec>Home</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-3efcd581 data-v-283b26e9><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-283b26e9 data-v-7df97737 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-7df97737></span><span class="vpi-moon moon" data-v-7df97737></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-3efcd581 data-v-ef6192dc data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/ircam-ismm/webaudio-tutorials" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-358b6670><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-3efcd581 data-v-8e87c032 data-v-af5898d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-af5898d3><span class="vpi-more-horizontal icon" data-v-af5898d3></span></button><div class="menu" data-v-af5898d3><div class="VPMenu" data-v-af5898d3 data-v-e42ed9b3><!----><!--[--><!--[--><!----><div class="group" data-v-8e87c032><div class="item appearance" data-v-8e87c032><p class="label" data-v-8e87c032>Appearance</p><div class="appearance-action" data-v-8e87c032><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-8e87c032 data-v-7df97737 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-7df97737></span><span class="vpi-moon moon" data-v-7df97737></span><!--]--></span></span></button></div></div></div><div class="group" data-v-8e87c032><div class="item social-links" data-v-8e87c032><div class="VPSocialLinks social-links-list" data-v-8e87c032 data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/ircam-ismm/webaudio-tutorials" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-358b6670><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-3efcd581 data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-3efcd581><div class="divider-line" data-v-3efcd581></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-d8b57b2d data-v-2488c25a><div class="container" data-v-2488c25a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-2488c25a><span class="vpi-align-left menu-icon" data-v-2488c25a></span><span class="menu-text" data-v-2488c25a>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-2488c25a data-v-0b5c97a1><button data-v-0b5c97a1>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-d8b57b2d data-v-4871f9f5><div class="curtain" data-v-4871f9f5></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-4871f9f5><span class="visually-hidden" id="sidebar-aria-label" data-v-4871f9f5> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-4871f9f5><section class="VPSidebarItem level-0" data-v-4871f9f5 data-v-12a5e56c><!----><div class="items" data-v-12a5e56c><!--[--><div class="VPSidebarItem level-1 is-link" data-v-12a5e56c data-v-12a5e56c><div class="item" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><a class="VPLink link link" href="/webaudio-tutorials/" data-v-12a5e56c><!--[--><p class="text" data-v-12a5e56c>Introduction</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-4871f9f5><section class="VPSidebarItem level-0" data-v-4871f9f5 data-v-12a5e56c><div class="item" role="button" tabindex="0" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><h2 class="text" data-v-12a5e56c>First steps</h2><!----></div><div class="items" data-v-12a5e56c><!--[--><div class="VPSidebarItem level-1 is-link" data-v-12a5e56c data-v-12a5e56c><div class="item" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><a class="VPLink link link" href="/webaudio-tutorials/first-steps/generalities.html" data-v-12a5e56c><!--[--><p class="text" data-v-12a5e56c>Generalities about the Web</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-12a5e56c data-v-12a5e56c><div class="item" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><a class="VPLink link link" href="/webaudio-tutorials/first-steps/setting-up-environment.html" data-v-12a5e56c><!--[--><p class="text" data-v-12a5e56c>Setting up an environment</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-12a5e56c data-v-12a5e56c><div class="item" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><a class="VPLink link link" href="/webaudio-tutorials/first-steps/simple-website.html" data-v-12a5e56c><!--[--><p class="text" data-v-12a5e56c>Create a simple website</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-4871f9f5><section class="VPSidebarItem level-0 has-active" data-v-4871f9f5 data-v-12a5e56c><div class="item" role="button" tabindex="0" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><h2 class="text" data-v-12a5e56c>Basics</h2><!----></div><div class="items" data-v-12a5e56c><!--[--><div class="VPSidebarItem level-1 is-link" data-v-12a5e56c data-v-12a5e56c><div class="item" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><a class="VPLink link link" href="/webaudio-tutorials/basics/web-audio-api-introduction.html" data-v-12a5e56c><!--[--><p class="text" data-v-12a5e56c>Web Audio API - Introduction</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-12a5e56c data-v-12a5e56c><div class="item" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><a class="VPLink link link" href="/webaudio-tutorials/basics/oscillators-and-audio-files.html" data-v-12a5e56c><!--[--><p class="text" data-v-12a5e56c>Oscillators and audio files</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-12a5e56c data-v-12a5e56c><div class="item" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><a class="VPLink link link" href="/webaudio-tutorials/basics/amplitude-modulation-synthesis.html" data-v-12a5e56c><!--[--><p class="text" data-v-12a5e56c>Amplitude modulation</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-12a5e56c data-v-12a5e56c><div class="item" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><a class="VPLink link link" href="/webaudio-tutorials/basics/encapsulating-logic.html" data-v-12a5e56c><!--[--><p class="text" data-v-12a5e56c>Encapsulating logic</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-12a5e56c data-v-12a5e56c><div class="item" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><a class="VPLink link link" href="/webaudio-tutorials/basics/reusable-feedback-delay.html" data-v-12a5e56c><!--[--><p class="text" data-v-12a5e56c>Reusable feedback delay</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-4871f9f5><section class="VPSidebarItem level-0" data-v-4871f9f5 data-v-12a5e56c><div class="item" role="button" tabindex="0" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><h2 class="text" data-v-12a5e56c>Scheduling</h2><!----></div><div class="items" data-v-12a5e56c><!--[--><div class="VPSidebarItem level-1 is-link" data-v-12a5e56c data-v-12a5e56c><div class="item" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><a class="VPLink link link" href="/webaudio-tutorials/scheduling/timing-and-scheduling.html" data-v-12a5e56c><!--[--><p class="text" data-v-12a5e56c>Timing and Scheduling</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-12a5e56c data-v-12a5e56c><div class="item" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><a class="VPLink link link" href="/webaudio-tutorials/scheduling/granular-synthesis.html" data-v-12a5e56c><!--[--><p class="text" data-v-12a5e56c>Granular Synthesis</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-12a5e56c data-v-12a5e56c><div class="item" data-v-12a5e56c><div class="indicator" data-v-12a5e56c></div><a class="VPLink link link" href="/webaudio-tutorials/scheduling/step-sequencer.html" data-v-12a5e56c><!--[--><p class="text" data-v-12a5e56c>Step Sequencer</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-d8b57b2d data-v-9a6c75ad><div class="VPDoc has-sidebar has-aside" data-v-9a6c75ad data-v-e6f2a212><!--[--><!--]--><div class="container" data-v-e6f2a212><div class="aside" data-v-e6f2a212><div class="aside-curtain" data-v-e6f2a212></div><div class="aside-container" data-v-e6f2a212><div class="aside-content" data-v-e6f2a212><div class="VPDocAside" data-v-e6f2a212 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-cb998dce data-v-6b52fe58><div class="content" data-v-6b52fe58><div class="outline-marker" data-v-6b52fe58></div><div class="outline-title" role="heading" aria-level="2" data-v-6b52fe58>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-6b52fe58><span class="visually-hidden" id="doc-outline-aria-label" data-v-6b52fe58> Table of Contents for current page </span><ul class="VPDocOutlineItem root" data-v-6b52fe58 data-v-53c99d69><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e6f2a212><div class="content-container" data-v-e6f2a212><!--[--><!--]--><main class="main" data-v-e6f2a212><div style="position:relative;" class="vp-doc _webaudio-tutorials_basics_oscillators-and-audio-files" data-v-e6f2a212><div><h1 id="oscillators-and-audio-files" tabindex="-1">Oscillators and Audio Files <a class="header-anchor" href="#oscillators-and-audio-files" aria-label="Permalink to &quot;Oscillators and Audio Files&quot;">​</a></h1><p>In this tutorial, we will learn how to use some basic building blocks of the Web Audio API.</p><h3 id="related-documentation" tabindex="-1">Related Documentation <a class="header-anchor" href="#related-documentation" aria-label="Permalink to &quot;Related Documentation&quot;">​</a></h3><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/AudioContext" target="_blank" rel="noreferrer"><code>AudioContext</code></a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/OscillatorNode" target="_blank" rel="noreferrer"><code>OscillatorNode</code></a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/GainNode" target="_blank" rel="noreferrer"><code>GainNode</code></a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/AudioBufferSourceNode" target="_blank" rel="noreferrer"><code>AudioBufferSourceNode</code></a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/AudioBuffer" target="_blank" rel="noreferrer"><code>AudioBuffer</code></a></li></ul><h2 id="setting-up-the-project" tabindex="-1">Setting up the project <a class="header-anchor" href="#setting-up-the-project" aria-label="Permalink to &quot;Setting up the project&quot;">​</a></h2><p>Let&#39;s start with creating a new project, open a <code>Terminal</code> and write the following command to create the tutorial directory:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#A6E22E;">mkdir</span><span style="color:#AE81FF;"> -p</span><span style="color:#E6DB74;"> ~/Desktop/webaudio-tutorials/02-oscillators-and-audio-files</span></span></code></pre></div><p>Press <code>Enter</code> to execute the command, then go to the directory:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#66D9EF;">cd</span><span style="color:#E6DB74;"> ~/Desktop/webaudio-tutorials/02-oscillators-and-audio-files</span></span></code></pre></div><p>And start the server</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#A6E22E;">npx</span><span style="color:#E6DB74;"> serve</span></span></code></pre></div><p><img src="/webaudio-tutorials/assets/create-project.B00IRSt3.png" alt="create-project"></p><p>Then open the directory in your text editor, and create an HTML file called <code>index.html</code> with the following content:</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F8F8F2;">&lt;!</span><span style="color:#F92672;">DOCTYPE</span><span style="color:#A6E22E;"> html</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#F92672;">html</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#F92672;">head</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">  &lt;</span><span style="color:#F92672;">meta</span><span style="color:#A6E22E;"> charset</span><span style="color:#F8F8F2;">=</span><span style="color:#E6DB74;">&quot;utf-8&quot;</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">  &lt;</span><span style="color:#F92672;">meta</span><span style="color:#A6E22E;"> name</span><span style="color:#F8F8F2;">=</span><span style="color:#E6DB74;">&quot;viewport&quot;</span><span style="color:#A6E22E;"> content</span><span style="color:#F8F8F2;">=</span><span style="color:#E6DB74;">&quot;width=device-width, initial-scale=1&quot;</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">  &lt;</span><span style="color:#F92672;">title</span><span style="color:#F8F8F2;">&gt;02-oscillators-and-audio-files&lt;/</span><span style="color:#F92672;">title</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">  &lt;</span><span style="color:#F92672;">script</span><span style="color:#A6E22E;"> defer</span><span style="color:#A6E22E;"> type</span><span style="color:#F8F8F2;">=</span><span style="color:#E6DB74;">&quot;module&quot;</span><span style="color:#A6E22E;"> src</span><span style="color:#F8F8F2;">=</span><span style="color:#E6DB74;">&quot;./main.js&quot;</span><span style="color:#F8F8F2;">&gt;&lt;/</span><span style="color:#F92672;">script</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;/</span><span style="color:#F92672;">head</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#F92672;">body</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">  &lt;</span><span style="color:#F92672;">h1</span><span style="color:#F8F8F2;">&gt;Oscillator &amp; Audio Files&lt;/</span><span style="color:#F92672;">h1</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;/</span><span style="color:#F92672;">body</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;/</span><span style="color:#F92672;">html</span><span style="color:#F8F8F2;">&gt;</span></span></code></pre></div><p>As you can see in the highlighted line, the HTML will try to import a JavaScript file called <code>main.js</code>, so let&#39;s create this <code>main.js</code> file with the following content:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F8F8F2;">console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;Hello&#39;</span><span style="color:#F8F8F2;">);</span></span></code></pre></div><p>If you open a Web browser at <a href="http://localhost:3000" target="_blank" rel="noreferrer">http://localhost:3000</a>, and open the JavaScript console, you should see the following:</p><p><img src="/webaudio-tutorials/assets/project-structure.B7Z3DUhA.png" alt="project-structure"></p><h2 id="creating-and-resuming-the-audiocontext" tabindex="-1">Creating and resuming the <code>AudioContext</code> <a class="header-anchor" href="#creating-and-resuming-the-audiocontext" aria-label="Permalink to &quot;Creating and resuming the `AudioContext`&quot;">​</a></h2><p>As described in the <a href="./web-audio-api-introduction.html">previous step</a> a Web Audio graph is always created within an <a href="https://developer.mozilla.org/en-US/docs/Web/API/AudioContext" target="_blank" rel="noreferrer"><code>AudioContext</code></a>.</p><p>So let&#39;s first create our first <code>AudioContext</code>:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#88846F;">// main.js</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> audioContext </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> AudioContext</span><span style="color:#F8F8F2;">();</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>The first line in the snippet above, i.e. <code>// main.js</code> is not meant to be added to the code, but just to remind you in which file the snippet is located. The way the line will be written will differ according to the language of the file but will always correspond to a comment in this language, e.g.:</p><ul><li>In JavaScript you will see something like: <code>// main.js</code></li><li>In HTML you will see something like: <code>&lt;!-- index.html --&gt;</code></li><li>In CSS you will see something like: <code>/* style.css */</code></li></ul><p>We will often use this convention in these tutorials.</p></div><p>In this snippet, we create new instance of <code>AudioContext</code> that we store into a variable called <code>audioContext</code>.</p><p>By default, a new <code>AudioContext</code> is always created with a &quot;suspended&quot; state, which means that no audio will be produced even if asked gently. To &quot;resume&quot; the state, we will need to call a specific method, i.e. <code>audioContext.resume</code>, which much be called when the user interact with the page. This restriction is primarily made to prevent Web browser to play some sound (e.g. for advertising...) each time you open a Web page.</p><p>Then let&#39;s first add a button in our HTML file, that we will use to active the context.</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#88846F;">&lt;!-- index.html --&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#F92672;">body</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">  &lt;</span><span style="color:#F92672;">h1</span><span style="color:#F8F8F2;">&gt;Oscillator &amp; Audio Files&lt;/</span><span style="color:#F92672;">h1</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">  &lt;</span><span style="color:#F92672;">button</span><span style="color:#A6E22E;"> id</span><span style="color:#F8F8F2;">=</span><span style="color:#E6DB74;">&quot;resume-context&quot;</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">    Resume Audio Context</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">  &lt;/</span><span style="color:#F92672;">button</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;/</span><span style="color:#F92672;">body</span><span style="color:#F8F8F2;">&gt;</span></span></code></pre></div><p>Then in the JavaScript, we can listen for an &#39;click&#39; event from the user on this button to resume our <code>AudioContext</code>:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#88846F;">// main.js</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> audioContext </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> AudioContext</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#88846F;">// grab a JavaScript representation to the HTML button with id &quot;resume-context&quot;</span></span>
<span class="line highlighted"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> resumeButton </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> document.</span><span style="color:#A6E22E;">querySelector</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;#resume-context&#39;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line highlighted"><wbr></span>
<span class="line highlighted"><span style="color:#88846F;">// define a function to be executed when the user click on the button</span></span>
<span class="line highlighted"><span style="color:#F92672;">async</span><span style="color:#66D9EF;font-style:italic;"> function</span><span style="color:#A6E22E;"> resumeContext</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line highlighted"><span style="color:#F92672;">  await</span><span style="color:#F8F8F2;"> audioContext.</span><span style="color:#A6E22E;">resume</span><span style="color:#F8F8F2;">();</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;audioContext.state:&#39;</span><span style="color:#F8F8F2;">, audioContext.state);</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">}</span></span>
<span class="line highlighted"><wbr></span>
<span class="line highlighted"><span style="color:#88846F;">// register the `resumeContext` as a callback to be executed</span></span>
<span class="line highlighted"><span style="color:#88846F;">// when the clicks on the button</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">resumeButton.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">, resumeContext);</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>The <code>async</code> and <code>await</code> keyword that you see in the declaration of the <code>resumeContext</code> function refer to what is called <em>asynchronous operations</em>. Without going into much detail, you can think of asynchronous operations as operations that have to deal with the underlying system and may take a time that is unknown, e.g. downloading a file is an asynchronous operation as the time it takes to download a file may differ depending of the weight of the file, of the quality of your internet connection, etc.</p><p>The <code>audioContext.resume()</code> call is asynchronous because the browser needs to ask the system access the sound card and to open a new high priority process (or <em>thread</em>) in which the audio will be computed. The <code>await</code> keyword just means that we wait for the command to be executed before executing the next line of code.</p><p>You will see a lot of asynchronous code when using JavaScript so it&#39;s important to understand this concept a bit.</p></div><p>If you click on the button, you should see the log appear in the console confirming that the status of the <code>audioContext</code> is now &quot;running&quot;, which means everything is ready to produce some sounds.</p><p><img src="/webaudio-tutorials/assets/audio-context-resume.CBiqQeIO.png" alt="audio-context-resume"></p><h2 id="using-the-oscillatornode" tabindex="-1">Using the <code>OscillatorNode</code> <a class="header-anchor" href="#using-the-oscillatornode" aria-label="Permalink to &quot;Using the `OscillatorNode`&quot;">​</a></h2><p>Now that our context is &quot;running&quot;, we can use it to play actual sounds with the Web Audio API. Let&#39;s start with the a simple <a href="https://developer.mozilla.org/en-US/docs/Web/API/OscillatorNode" target="_blank" rel="noreferrer"><code>OscillatorNode</code></a></p><p>Let&#39;s first add another button into our HTML</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#88846F;">&lt;!-- index.html --&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#F92672;">button</span><span style="color:#A6E22E;"> id</span><span style="color:#F8F8F2;">=</span><span style="color:#E6DB74;">&quot;resume-context&quot;</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">  Resume Audio Context</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;/</span><span style="color:#F92672;">button</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">&lt;</span><span style="color:#F92672;">button</span><span style="color:#A6E22E;"> id</span><span style="color:#F8F8F2;">=</span><span style="color:#E6DB74;">&quot;trigger-osc&quot;</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">  Trigger Oscillator</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">&lt;/</span><span style="color:#F92672;">button</span><span style="color:#F8F8F2;">&gt;</span></span></code></pre></div><p>And grab a reference to it in the JavaScript, as we did for the <code>#resume-context</code> button:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#88846F;">// main.js</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> resumeButton </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> document.</span><span style="color:#A6E22E;">querySelector</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;#resume-context&#39;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line highlighted"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> triggerOscButton </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> document.</span><span style="color:#A6E22E;">querySelector</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;#trigger-osc&#39;</span><span style="color:#F8F8F2;">);</span></span></code></pre></div><p>Then, we can create and start a new <code>OscillatorNode</code> each time the user clicks on the button.</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#88846F;">// main.js</span></span>
<span class="line"><span style="color:#F8F8F2;">resumeButton.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">, resumeContext);</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#88846F;">// function that creates and start a new oscillator</span></span>
<span class="line highlighted"><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#A6E22E;"> triggerOsc</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line highlighted"><span style="color:#88846F;">  // create a new oscillator</span></span>
<span class="line highlighted"><span style="color:#66D9EF;font-style:italic;">  const</span><span style="color:#F8F8F2;"> osc </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> audioContext.</span><span style="color:#A6E22E;">createOscillator</span><span style="color:#F8F8F2;">();</span></span>
<span class="line highlighted"><span style="color:#88846F;">  // connect it to the audio output, i.e. the `DestinationNode`</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">  osc.</span><span style="color:#A6E22E;">connect</span><span style="color:#F8F8F2;">(audioContext.destination);</span></span>
<span class="line highlighted"><span style="color:#88846F;">  // start the oscillator as fast as we can</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">  osc.</span><span style="color:#A6E22E;">start</span><span style="color:#F8F8F2;">();</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">}</span></span>
<span class="line highlighted"><wbr></span>
<span class="line highlighted"><span style="color:#88846F;">// create an oscillator each time the button is clicked</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">triggerOscButton.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">, triggerOsc);</span></span></code></pre></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Remember that each time you reload the page, you face a brand new <code>AudioContext</code>, therefore don&#39;t forget to click on the &quot;resume context&quot; button first.</p></div><h3 id="setting-the-frequency" tabindex="-1">Setting the frequency <a class="header-anchor" href="#setting-the-frequency" aria-label="Permalink to &quot;Setting the frequency&quot;">​</a></h3><p>If you click several time on the button, you will hear the sound slightly changing. Indeed each time you click the button, you create a new oscillator with default frequency (i.e. 440Hz), which produces phasing and distortion effects when they pile up.</p><p>Let&#39;s change a bit our <code>triggerOsc</code> function to modify the frequency of each of the oscillators:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai has-diff vp-code"><code><span class="line"><span style="color:#88846F;">// create a new oscillator</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> osc </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> audioContext.</span><span style="color:#A6E22E;">createOscillator</span><span style="color:#F8F8F2;">();</span></span>
<span class="line diff add"><span style="color:#88846F;">// pick a random frequency between 100 and 1000 Hz</span></span>
<span class="line diff add"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> freq </span><span style="color:#F92672;">=</span><span style="color:#AE81FF;"> 100</span><span style="color:#F92672;"> +</span><span style="color:#F8F8F2;"> Math.</span><span style="color:#A6E22E;">random</span><span style="color:#F8F8F2;">() </span><span style="color:#F92672;">*</span><span style="color:#AE81FF;"> 900</span><span style="color:#F8F8F2;">; </span></span>
<span class="line diff add"><span style="color:#88846F;">// apply this frequency to oscillator</span></span>
<span class="line diff add"><span style="color:#F8F8F2;">osc.frequency.value </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> freq; </span></span>
<span class="line"><span style="color:#88846F;">// connect it to the audio output, i.e. the `DestinationNode`</span></span>
<span class="line"><span style="color:#F8F8F2;">osc.</span><span style="color:#A6E22E;">connect</span><span style="color:#F8F8F2;">(audioContext.destination);</span></span>
<span class="line"><span style="color:#88846F;">// start the oscillator as fast as we can</span></span>
<span class="line"><span style="color:#F8F8F2;">osc.</span><span style="color:#A6E22E;">start</span><span style="color:#F8F8F2;">();</span></span></code></pre></div><p>If you reload the page, resume the context and click on the button you will now hear the different oscillators piling up at different frequency. The sound will still get distorted at some point but at least you can hear the effect of triggering these oscillator.</p><p>When we added this line:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F8F8F2;">osc.frequency.value </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> freq;</span></span></code></pre></div><p>We actually changed an <a href="https://developer.mozilla.org/en-US/docs/Web/API/AudioParam" target="_blank" rel="noreferrer"><code>AudioParam</code></a> called <code>frequency</code> that is linked to the oscillator. Most <code>AudioNode</code>s have such parameters that allows to modify their behavior and create automation.</p><h3 id="adding-an-envelop" tabindex="-1">Adding an envelop <a class="header-anchor" href="#adding-an-envelop" aria-label="Permalink to &quot;Adding an envelop&quot;">​</a></h3><p>To dig a bit more into <code>AudioParam</code>s, let&#39;s modify our <code>triggerOsc</code> function to use a <a href="https://developer.mozilla.org/en-US/docs/Web/API/GainNode" target="_blank" rel="noreferrer"><code>GainNode</code></a> in order to add an envelop to each of our oscillators</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai has-diff vp-code"><code><span class="line diff add"><span style="color:#88846F;">// create a gain node and set its gain value to 0</span></span>
<span class="line diff add"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> env </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> audioContext.</span><span style="color:#A6E22E;">createGain</span><span style="color:#F8F8F2;">(); </span></span>
<span class="line diff add"><span style="color:#F8F8F2;">env.gain.value </span><span style="color:#F92672;">=</span><span style="color:#AE81FF;"> 0</span><span style="color:#F8F8F2;">; </span></span>
<span class="line"><span style="color:#88846F;">// start the oscillator as fast as we can</span></span>
<span class="line"><span style="color:#F8F8F2;">osc.</span><span style="color:#A6E22E;">start</span><span style="color:#F8F8F2;">();</span></span></code></pre></div><p>Then we need to schedule automation, here we will for example make a linear ramp from 0 to 1 in 10 ms and then go from 1 to 0 in ~1 sec.</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai has-diff vp-code"><code><span class="line"><span style="color:#88846F;">// create a gain node and set its gain value to 0</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> env </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> audioContext.</span><span style="color:#A6E22E;">createGain</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">env.gain.value </span><span style="color:#F92672;">=</span><span style="color:#AE81FF;"> 0</span><span style="color:#F8F8F2;">;</span></span>
<span class="line diff add"><span style="color:#88846F;">// pick the context current time in seconds</span></span>
<span class="line diff add"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> now </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> audioContext.currentTime; </span></span>
<span class="line diff add"><span style="color:#F8F8F2;">env.gain.</span><span style="color:#A6E22E;">setValueAtTime</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">, now); </span><span style="color:#88846F;">// create an automation point</span></span>
<span class="line diff add"><span style="color:#F8F8F2;">env.gain.</span><span style="color:#A6E22E;">linearRampToValueAtTime</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">1</span><span style="color:#F8F8F2;">, now </span><span style="color:#F92672;">+</span><span style="color:#AE81FF;"> 0.01</span><span style="color:#F8F8F2;">) </span><span style="color:#88846F;">// ramp to 1 in 10 ms</span></span>
<span class="line diff add"><span style="color:#F8F8F2;">env.gain.</span><span style="color:#A6E22E;">linearRampToValueAtTime</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">, now </span><span style="color:#F92672;">+</span><span style="color:#AE81FF;"> 1</span><span style="color:#F8F8F2;">) </span><span style="color:#88846F;">// ramp to 0 in 1 sec</span></span></code></pre></div><p>Then let&#39;s modify how the graph is created to pipe the oscillator into the envelop before sending it to destination:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai has-diff vp-code"><code><span class="line diff remove"><span style="color:#88846F;">// connect it to the audio output, i.e. the `DestinationNode`</span></span>
<span class="line diff remove"><span style="color:#F8F8F2;">osc.</span><span style="color:#A6E22E;">connect</span><span style="color:#F8F8F2;">(audioContext.destination); </span></span>
<span class="line"><span style="color:#88846F;">// create a gain node and set its gain value to 0</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> env </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> audioContext.</span><span style="color:#A6E22E;">createGain</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">env.gain.value </span><span style="color:#F92672;">=</span><span style="color:#AE81FF;"> 0</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#88846F;">// pick the context current time in seconds</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> now </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> audioContext.currentTime;</span></span>
<span class="line"><span style="color:#F8F8F2;">env.gain.</span><span style="color:#A6E22E;">setValueAtTime</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">, now); </span><span style="color:#88846F;">// create an automation point</span></span>
<span class="line"><span style="color:#F8F8F2;">env.gain.</span><span style="color:#A6E22E;">linearRampToValueAtTime</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">1</span><span style="color:#F8F8F2;">, now </span><span style="color:#F92672;">+</span><span style="color:#AE81FF;"> 0.01</span><span style="color:#F8F8F2;">) </span><span style="color:#88846F;">// ramp to 1 in 10 ms</span></span>
<span class="line"><span style="color:#F8F8F2;">env.gain.</span><span style="color:#A6E22E;">linearRampToValueAtTime</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">, now </span><span style="color:#F92672;">+</span><span style="color:#AE81FF;"> 1</span><span style="color:#F8F8F2;">) </span><span style="color:#88846F;">// ramp to 0 in 1 sec</span></span>
<span class="line diff add"><span style="color:#88846F;">// create the graph chain: osc -&gt; env -&gt; output</span></span>
<span class="line diff add"><span style="color:#F8F8F2;">osc.</span><span style="color:#A6E22E;">connect</span><span style="color:#F8F8F2;">(env).</span><span style="color:#A6E22E;">connect</span><span style="color:#F8F8F2;">(audioContext.destination); </span></span></code></pre></div><p>If you reload the page and trigger some oscillator you should hear the ramp applied to each triggered oscillators.</p><p>However, there is still an issue with our code. Indeed, our oscillators are started but they are never stopped which might lead to waste of resources if click a lot of time on the button. As we know the exact start and end time of our ramp, we can know explicitly control the oscillators so that they start at the beginning of the ramp and stop exactly when the ramp goes back to zero.</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai has-diff vp-code"><code><span class="line diff remove"><span style="color:#88846F;">// start the oscillator as fast as we can</span></span>
<span class="line diff remove"><span style="color:#F8F8F2;">osc.</span><span style="color:#A6E22E;">start</span><span style="color:#F8F8F2;">(); </span></span>
<span class="line diff add"><span style="color:#88846F;">// start the oscillator when the ramp start and stop it when</span></span>
<span class="line diff add"><span style="color:#88846F;">// it goes back to zero, i.e. 1 sec later</span></span>
<span class="line diff add"><span style="color:#F8F8F2;">osc.</span><span style="color:#A6E22E;">start</span><span style="color:#F8F8F2;">(now); </span></span>
<span class="line diff add"><span style="color:#F8F8F2;">osc.</span><span style="color:#A6E22E;">stop</span><span style="color:#F8F8F2;">(now </span><span style="color:#F92672;">+</span><span style="color:#AE81FF;"> 1</span><span style="color:#F8F8F2;">); </span></span></code></pre></div><p>Finally, let&#39;s fix the clipping issue that occur when we trigger multiple oscillators in a short period of time, and make our envelop a little bit nicer:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai has-diff vp-code"><code><span class="line diff remove"><span style="color:#F8F8F2;">env.gain.</span><span style="color:#A6E22E;">linearRampToValueAtTime</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">1</span><span style="color:#F8F8F2;">, now </span><span style="color:#F92672;">+</span><span style="color:#AE81FF;"> 0.01</span><span style="color:#F8F8F2;">); </span></span>
<span class="line diff remove"><span style="color:#F8F8F2;">env.gain.</span><span style="color:#A6E22E;">linearRampToValueAtTime</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">, now </span><span style="color:#F92672;">+</span><span style="color:#AE81FF;"> 1</span><span style="color:#F8F8F2;">); </span></span>
<span class="line diff add"><span style="color:#F8F8F2;">env.gain.</span><span style="color:#A6E22E;">linearRampToValueAtTime</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">0.2</span><span style="color:#F8F8F2;">, now </span><span style="color:#F92672;">+</span><span style="color:#AE81FF;"> 0.01</span><span style="color:#F8F8F2;">); </span><span style="color:#88846F;">// ramp to 0.2 in 10 ms</span></span>
<span class="line diff add"><span style="color:#F8F8F2;">env.gain.</span><span style="color:#A6E22E;">exponentialRampToValueAtTime</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">0.0001</span><span style="color:#F8F8F2;">, now </span><span style="color:#F92672;">+</span><span style="color:#AE81FF;"> 1</span><span style="color:#F8F8F2;">); </span><span style="color:#88846F;">// ramp to 0.0001 in 1 sec</span></span></code></pre></div><h3 id="wrap-up" tabindex="-1">Wrap up <a class="header-anchor" href="#wrap-up" aria-label="Permalink to &quot;Wrap up&quot;">​</a></h3><p>At this point, your <code>index.html</code> and <code>main.js</code> should look like the following</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#88846F;">&lt;!-- index.html --&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;!</span><span style="color:#F92672;">DOCTYPE</span><span style="color:#A6E22E;"> html</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#F92672;">html</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#F92672;">head</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">  &lt;</span><span style="color:#F92672;">meta</span><span style="color:#A6E22E;"> charset</span><span style="color:#F8F8F2;">=</span><span style="color:#E6DB74;">&quot;utf-8&quot;</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">  &lt;</span><span style="color:#F92672;">meta</span><span style="color:#A6E22E;"> name</span><span style="color:#F8F8F2;">=</span><span style="color:#E6DB74;">&quot;viewport&quot;</span><span style="color:#A6E22E;"> content</span><span style="color:#F8F8F2;">=</span><span style="color:#E6DB74;">&quot;width=device-width, initial-scale=1&quot;</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">  &lt;</span><span style="color:#F92672;">title</span><span style="color:#F8F8F2;">&gt;02-oscillators-and-audio-files&lt;/</span><span style="color:#F92672;">title</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">  &lt;</span><span style="color:#F92672;">script</span><span style="color:#A6E22E;"> defer</span><span style="color:#A6E22E;"> type</span><span style="color:#F8F8F2;">=</span><span style="color:#E6DB74;">&quot;module&quot;</span><span style="color:#A6E22E;"> src</span><span style="color:#F8F8F2;">=</span><span style="color:#E6DB74;">&quot;./main.js&quot;</span><span style="color:#F8F8F2;">&gt;&lt;/</span><span style="color:#F92672;">script</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;/</span><span style="color:#F92672;">head</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#F92672;">body</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">  &lt;</span><span style="color:#F92672;">h1</span><span style="color:#F8F8F2;">&gt;Oscillator &amp; Audio Files&lt;/</span><span style="color:#F92672;">h1</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">  &lt;</span><span style="color:#F92672;">button</span><span style="color:#A6E22E;"> id</span><span style="color:#F8F8F2;">=</span><span style="color:#E6DB74;">&quot;resume-context&quot;</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">    Resume Audio Context</span></span>
<span class="line"><span style="color:#F8F8F2;">  &lt;/</span><span style="color:#F92672;">button</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">  &lt;</span><span style="color:#F92672;">button</span><span style="color:#A6E22E;"> id</span><span style="color:#F8F8F2;">=</span><span style="color:#E6DB74;">&quot;trigger-osc&quot;</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">    Trigger Oscillator</span></span>
<span class="line"><span style="color:#F8F8F2;">  &lt;/</span><span style="color:#F92672;">button</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;/</span><span style="color:#F92672;">body</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;/</span><span style="color:#F92672;">html</span><span style="color:#F8F8F2;">&gt;</span></span></code></pre></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#88846F;">// main.js</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> audioContext </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> new</span><span style="color:#A6E22E;"> AudioContext</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// grab a JavaScript representation to the HTML button with id &quot;resume-context&quot;</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> resumeButton </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> document.</span><span style="color:#A6E22E;">querySelector</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;#resume-context&#39;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> triggerOscButton </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> document.</span><span style="color:#A6E22E;">querySelector</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;#trigger-osc&#39;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// logic to resume the audio context</span></span>
<span class="line"><span style="color:#F92672;">async</span><span style="color:#66D9EF;font-style:italic;"> function</span><span style="color:#A6E22E;"> resumeContext</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F92672;">  await</span><span style="color:#F8F8F2;"> audioContext.</span><span style="color:#A6E22E;">resume</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;audioContext.state:&#39;</span><span style="color:#F8F8F2;">, audioContext.state);</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">resumeButton.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">, resumeContext);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">// logic to trigger oscillators</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#A6E22E;"> triggerOsc</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  const</span><span style="color:#F8F8F2;"> osc </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> audioContext.</span><span style="color:#A6E22E;">createOscillator</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  const</span><span style="color:#F8F8F2;"> freq </span><span style="color:#F92672;">=</span><span style="color:#AE81FF;"> 100</span><span style="color:#F92672;"> +</span><span style="color:#F8F8F2;"> Math.</span><span style="color:#A6E22E;">random</span><span style="color:#F8F8F2;">() </span><span style="color:#F92672;">*</span><span style="color:#AE81FF;"> 900</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F8F8F2;">  osc.frequency.value </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> freq;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  const</span><span style="color:#F8F8F2;"> env </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> audioContext.</span><span style="color:#A6E22E;">createGain</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  const</span><span style="color:#F8F8F2;"> now </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> audioContext.currentTime;</span></span>
<span class="line"><span style="color:#F8F8F2;">  env.gain.value </span><span style="color:#F92672;">=</span><span style="color:#AE81FF;"> 0</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F8F8F2;">  env.gain.</span><span style="color:#A6E22E;">setValueAtTime</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">, now);</span></span>
<span class="line"><span style="color:#F8F8F2;">  env.gain.</span><span style="color:#A6E22E;">linearRampToValueAtTime</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">0.2</span><span style="color:#F8F8F2;">, now </span><span style="color:#F92672;">+</span><span style="color:#AE81FF;"> 0.01</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">  env.gain.</span><span style="color:#A6E22E;">exponentialRampToValueAtTime</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">0.0001</span><span style="color:#F8F8F2;">, now </span><span style="color:#F92672;">+</span><span style="color:#AE81FF;"> 1</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">  osc.</span><span style="color:#A6E22E;">connect</span><span style="color:#F8F8F2;">(env).</span><span style="color:#A6E22E;">connect</span><span style="color:#F8F8F2;">(audioContext.destination);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  osc.</span><span style="color:#A6E22E;">start</span><span style="color:#F8F8F2;">(now);</span></span>
<span class="line"><span style="color:#F8F8F2;">  osc.</span><span style="color:#A6E22E;">stop</span><span style="color:#F8F8F2;">(now </span><span style="color:#F92672;">+</span><span style="color:#AE81FF;"> 1</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">triggerOscButton.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">, triggerOsc);</span></span></code></pre></div><h2 id="using-the-audiobuffersourcenode" tabindex="-1">Using the <code>AudioBufferSourceNode</code> <a class="header-anchor" href="#using-the-audiobuffersourcenode" aria-label="Permalink to &quot;Using the `AudioBufferSourceNode`&quot;">​</a></h2><p><code>OscillatorNode</code>s are really nice indeed, but let&#39;s now consider how we can play a sound file using the <a href="https://developer.mozilla.org/en-US/docs/Web/API/AudioBufferSourceNode" target="_blank" rel="noreferrer"><code>AudioBufferSourceNode</code></a>.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>The sample used in the tutorial can be downloaded <a href="/webaudio-tutorials/static-assets/oscillators-and-audio-files.zip">here</a></p></div><h3 id="load-a-sound-file" tabindex="-1">Load a sound file <a class="header-anchor" href="#load-a-sound-file" aria-label="Permalink to &quot;Load a sound file&quot;">​</a></h3><p>To do so, we will first need to load a file into memory so the Web Audio API can have full control over the playback. Let&#39;s then add some sound file into our project directory:</p><p><img src="/webaudio-tutorials/assets/sample-dir.exPCsEe9.png" alt="sample-dir"></p><p>Then add the following code into <code>main.js</code> to load a sound file from the network and decode it into an <a href="https://developer.mozilla.org/en-US/docs/Web/API/AudioBuffer" target="_blank" rel="noreferrer"><code>AudioBuffer</code></a>:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#88846F;">// main.js</span></span>
<span class="line highlighted"><span style="color:#88846F;">// define a function that load a file from the network and decode</span></span>
<span class="line highlighted"><span style="color:#88846F;">// it into an `AudioBuffer` instance</span></span>
<span class="line highlighted"><span style="color:#F92672;">async</span><span style="color:#66D9EF;font-style:italic;"> function</span><span style="color:#A6E22E;"> loadAudioBuffer</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">pathToFile</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line highlighted"><span style="color:#66D9EF;font-style:italic;">    const</span><span style="color:#F8F8F2;"> response </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> await</span><span style="color:#A6E22E;"> fetch</span><span style="color:#F8F8F2;">(pathToFile);</span></span>
<span class="line highlighted"><span style="color:#66D9EF;font-style:italic;">    const</span><span style="color:#F8F8F2;"> buffer </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> await</span><span style="color:#F8F8F2;"> response.</span><span style="color:#A6E22E;">arrayBuffer</span><span style="color:#F8F8F2;">();</span></span>
<span class="line highlighted"><span style="color:#66D9EF;font-style:italic;">    const</span><span style="color:#F8F8F2;"> audioBuffer </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> await</span><span style="color:#F8F8F2;"> audioContext.</span><span style="color:#A6E22E;">decodeAudioData</span><span style="color:#F8F8F2;">(buffer);</span></span>
<span class="line highlighted"><span style="color:#F92672;">    return</span><span style="color:#F8F8F2;"> audioBuffer;</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">async</span><span style="color:#66D9EF;font-style:italic;"> function</span><span style="color:#A6E22E;"> resumeContext</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F92672;">  await</span><span style="color:#F8F8F2;"> audioContext.</span><span style="color:#A6E22E;">resume</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">  console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;audioContext.state:&#39;</span><span style="color:#F8F8F2;">, audioContext.state);</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span></code></pre></div><p>Then let&#39;s just execute the function with the path of our file as argument:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F92672;">async</span><span style="color:#66D9EF;font-style:italic;"> function</span><span style="color:#A6E22E;"> loadAudioBuffer</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">pathToFile</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    const</span><span style="color:#F8F8F2;"> response </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> await</span><span style="color:#A6E22E;"> fetch</span><span style="color:#F8F8F2;">(pathToFile);</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    const</span><span style="color:#F8F8F2;"> buffer </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> await</span><span style="color:#F8F8F2;"> response.</span><span style="color:#A6E22E;">arrayBuffer</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">    const</span><span style="color:#F8F8F2;"> audioBuffer </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> await</span><span style="color:#F8F8F2;"> audioContext.</span><span style="color:#A6E22E;">decodeAudioData</span><span style="color:#F8F8F2;">(buffer);</span></span>
<span class="line"><span style="color:#F92672;">    return</span><span style="color:#F8F8F2;"> audioBuffer;</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"><span style="color:#88846F;">// load the file inside our project directory</span></span>
<span class="line highlighted"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> buffer </span><span style="color:#F92672;">=</span><span style="color:#F92672;"> await</span><span style="color:#A6E22E;"> loadAudioBuffer</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;./sample.wav&#39;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(buffer);</span></span></code></pre></div><p>If you reload the page and open the console, you should see the information about the file you loaded logged in the console:</p><p><img src="/webaudio-tutorials/assets/audio-buffer.CwbrPHs_.png" alt="audio-buffer"></p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Note the buffer is properly loaded even if the <code>AudioContext</code> has not been resumed yet. This is a pretty handy feature as it allow us to load our audio file(s) when the page is loading, so everything is ready when the user starts to interact with the page.</p></div><h3 id="playback-the-buffer" tabindex="-1">Playback the buffer <a class="header-anchor" href="#playback-the-buffer" aria-label="Permalink to &quot;Playback the buffer&quot;">​</a></h3><p>Now that we have our <code>AudioBuffer</code> ready, let&#39;s had a button to trigger its playback into the HTML file:</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#88846F;">&lt;!-- index.html --&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#F92672;">button</span><span style="color:#A6E22E;"> id</span><span style="color:#F8F8F2;">=</span><span style="color:#E6DB74;">&quot;trigger-osc&quot;</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">Trigger Oscillator</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;/</span><span style="color:#F92672;">button</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#F92672;">button</span><span style="color:#A6E22E;"> id</span><span style="color:#F8F8F2;">=</span><span style="color:#E6DB74;">&quot;trigger-sound-file&quot;</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">Trigger Sound File</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;/</span><span style="color:#F92672;">button</span><span style="color:#F8F8F2;">&gt;</span></span></code></pre></div><p>Just as before with the other buttons, let&#39;s grab the JavaScript representation of this new button:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#88846F;">// main.js</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> triggerOscButton </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> document.</span><span style="color:#A6E22E;">querySelector</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;#trigger-osc&#39;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">const</span><span style="color:#F8F8F2;"> triggerSoundFileButton </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> document.</span><span style="color:#A6E22E;">querySelector</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;#trigger-sound-file&#39;</span><span style="color:#F8F8F2;">);</span></span></code></pre></div><p>And Finally, we can write the code that will play the sound file when the user click on the button:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#88846F;">// main.js</span></span>
<span class="line"><span style="color:#88846F;">// function that playback the audio buffer we previously loaded</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#A6E22E;"> triggerSoundFile</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#88846F;">  // create an audio buffer source node</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">  const</span><span style="color:#F8F8F2;"> src </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> audioContext.</span><span style="color:#A6E22E;">createBufferSource</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#88846F;">  // set it&#39;s buffer with the audio buffer we loaded earlier</span></span>
<span class="line"><span style="color:#F8F8F2;">  src.buffer </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> buffer;</span></span>
<span class="line"><span style="color:#88846F;">  // connect the node to the destination</span></span>
<span class="line"><span style="color:#F8F8F2;">  src.</span><span style="color:#A6E22E;">connect</span><span style="color:#F8F8F2;">(audioContext.destination);</span></span>
<span class="line"><span style="color:#88846F;">  // start plyaback</span></span>
<span class="line"><span style="color:#F8F8F2;">  src.</span><span style="color:#A6E22E;">start</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"><span style="color:#88846F;">// playback our audio buffer each time the button is clicked</span></span>
<span class="line"><span style="color:#F8F8F2;">triggerSoundFileButton.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">, triggerSoundFile);</span></span></code></pre></div><p>Tada! You now have a very powerful button that plays back your sound file each time you click on it.</p><h2 id="important-notes" tabindex="-1">Important notes <a class="header-anchor" href="#important-notes" aria-label="Permalink to &quot;Important notes&quot;">​</a></h2><h3 id="function-and-listeners-syntax" tabindex="-1">Function and listeners syntax <a class="header-anchor" href="#function-and-listeners-syntax" aria-label="Permalink to &quot;Function and listeners syntax&quot;">​</a></h3><p>In all this tutorial, we have used the following syntax to register listener for our buttons:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#A6E22E;"> onClick</span><span style="color:#F8F8F2;">() { console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;clicked&#39;</span><span style="color:#F8F8F2;">); }</span></span>
<span class="line"><span style="color:#F8F8F2;">myButton.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">, onClick);</span></span></code></pre></div><p>It is important to understand that, in the second line, we actually pass the reference of the function as an argument of the <code>addEventListener</code> method. The function <strong>is not executed</strong> at this point! This is the browser that will execute the function when the user actually clicks on the button.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Such functions are generally called <em>callbacks</em> because we give them to the browser (or to another piece of code), which is in charge of executing it (or calling it back) when &quot;something&quot; happens at some unknown point in the future.</p></div><p>Another way of writing this, would have been therefore to declare the function at the same time we pass it as an argument:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F8F8F2;">myButton.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#A6E22E;"> onClick</span><span style="color:#F8F8F2;">() { console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;clicked&#39;</span><span style="color:#F8F8F2;">); });</span></span></code></pre></div><p>But, now our line of code starts to be a bit long and hard to read, so we can just insert line breaks to make it a bit more pretty:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F8F8F2;">myButton.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#A6E22E;"> onClick</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">    console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;clicked&#39;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">});</span></span></code></pre></div><p>But, at this point, we can then wonder why need to give a name to this function, as we are only interested to pass as argument of <code>addEventListener</code>. Indeed, we will never have to call this function manually, as it is the responsibility of the browser. So, we can just remove the function name and pass an <em>anonymous function</em>:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F8F8F2;">myButton.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;font-style:italic;">function</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">    console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;clicked&#39;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">});</span></span></code></pre></div><p>Finally, yet another way of writing this would be to use the <em>arrow function</em> syntax:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F8F8F2;">myButton.</span><span style="color:#A6E22E;">addEventListener</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;click&#39;</span><span style="color:#F8F8F2;">, () </span><span style="color:#66D9EF;font-style:italic;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">    console.</span><span style="color:#A6E22E;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;clicked&#39;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">});</span></span></code></pre></div><p>In the reset of these tutorials, we will mostly use the two last syntax which are the most common in JavaScript. So make sure you&#39;ve understood this note and why these different syntax are (almost) all the same.</p><h3 id="audio-sources-behavior" tabindex="-1">Audio sources behavior <a class="header-anchor" href="#audio-sources-behavior" aria-label="Permalink to &quot;Audio sources behavior&quot;">​</a></h3><p>An important point you may have noticed, is that you created a new instance of <code>OscillatorNode</code> and <code>AudioBufferSourceNode</code> each time you clicked on the button. This is something that is often a bit confusing at first for people which are used to other music programming environment. Indeed, in the Web Audio API paradigm, sources are <strong>not reusable</strong>, once they have been stopped (or stopped themselves in the case of the <code>AudioBufferSourceNode</code>), they cannot be restarted again.</p><p>In future tutorials, we will see how this feature (that may appear weird) can end up to be very practical and powerful.</p><h2 id="conclusion" tabindex="-1">Conclusion <a class="header-anchor" href="#conclusion" aria-label="Permalink to &quot;Conclusion&quot;">​</a></h2><p>In this tutorial, you have learned how to use some basic building blocks of the Web Audio API.</p><p>Along the way you have learned many different things such as how to resume the audio context with a user interaction, how to load and decode a sound file from the network, how to create automation on audio parameters, as well as important concepts regarding the audio sources in the Web Audio API.</p><p>In the next tutorial, we will go a bit further with the creation of an AM synthesizer.</p></div></div></main><footer class="VPDocFooter" data-v-e6f2a212 data-v-b77f9094><!--[--><!--]--><!----><nav class="prev-next" data-v-b77f9094><div class="pager" data-v-b77f9094><a class="VPLink link pager-link prev" href="/webaudio-tutorials/basics/web-audio-api-introduction.html" data-v-b77f9094><!--[--><span class="desc" data-v-b77f9094>Previous page</span><span class="title" data-v-b77f9094>Web Audio API - Introduction</span><!--]--></a></div><div class="pager" data-v-b77f9094><a class="VPLink link pager-link next" href="/webaudio-tutorials/basics/amplitude-modulation-synthesis.html" data-v-b77f9094><!--[--><span class="desc" data-v-b77f9094>Next page</span><span class="title" data-v-b77f9094>Amplitude modulation</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"basics_web-audio-api-introduction.md\":\"CycO03f_\",\"first-steps_setting-up-environment.md\":\"DGEXyCmx\",\"index.md\":\"Cnpzc8jN\",\"basics_reusable-feedback-delay.md\":\"ChVEG-Cp\",\"basics_encapsulating-logic.md\":\"B02WJp0E\",\"first-steps_generalities.md\":\"BdbxhhUB\",\"scheduling_timing-and-scheduling.md\":\"Dwsqu1yd\",\"basics_amplitude-modulation-synthesis.md\":\"CdUU5gEW\",\"basics_oscillators-and-audio-files.md\":\"-03dkhFt\",\"scheduling_step-sequencer.md\":\"BLR4AqBr\",\"scheduling_granular-synthesis.md\":\"DIRpu14j\",\"first-steps_simple-website.md\":\"kYRZq57U\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Web Audio Tutorials\",\"description\":\"Set of tutorials on the Web Audio API\",\"base\":\"/webaudio-tutorials/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"Home\",\"link\":\"/\"}],\"sidebar\":[{\"text\":\"Introduction\",\"link\":\"/\"},{\"text\":\"First steps\",\"items\":[{\"text\":\"Generalities about the Web\",\"link\":\"/first-steps/generalities.md\"},{\"text\":\"Setting up an environment\",\"link\":\"/first-steps/setting-up-environment.md\"},{\"text\":\"Create a simple website\",\"link\":\"/first-steps/simple-website.md\"}]},{\"text\":\"Basics\",\"items\":[{\"text\":\"Web Audio API - Introduction\",\"link\":\"/basics/web-audio-api-introduction.md\"},{\"text\":\"Oscillators and audio files\",\"link\":\"/basics/oscillators-and-audio-files.md\"},{\"text\":\"Amplitude modulation\",\"link\":\"/basics/amplitude-modulation-synthesis.md\"},{\"text\":\"Encapsulating logic\",\"link\":\"/basics/encapsulating-logic.md\"},{\"text\":\"Reusable feedback delay\",\"link\":\"/basics/reusable-feedback-delay.md\"}]},{\"text\":\"Scheduling\",\"items\":[{\"text\":\"Timing and Scheduling\",\"link\":\"/scheduling/timing-and-scheduling.md\"},{\"text\":\"Granular Synthesis\",\"link\":\"/scheduling/granular-synthesis.md\"},{\"text\":\"Step Sequencer\",\"link\":\"/scheduling/step-sequencer.md\"}]}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/ircam-ismm/webaudio-tutorials\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>